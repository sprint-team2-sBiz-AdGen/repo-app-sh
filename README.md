# ðŸ¥˜ K-Food Image Enhancement Service (repo-app-sh)

**FeedlyAI Team Project - Part 'sh' (Image Enhancement)**

ì´ ì €ìž¥ì†ŒëŠ” ìš”ì‹ì—… ì†Œìƒê³µì¸ì„ ìœ„í•´ **K-Food(í•œì‹) íŠ¹ìœ ì˜ ì§ˆê°(ê¾¸ë•í•¨, ìœ¡ì¦™, ë°”ì‚­í•¨)ì„ ë³µì› ë° ê°•í™”**í•˜ëŠ” AI ëª¨ë¸(LoRA) í›ˆë ¨ ë° ì„œë¹™ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ ê³µê°„ì´ë‹¤.

---

## ðŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡° (Folder Structure)

ì´ í”„ë¡œì íŠ¸ëŠ” **'ëª¨ë¸ í›ˆë ¨(Training)'**ê³¼ **'ì„œë¹„ìŠ¤ ì„œë¹™(Serving)'** í™˜ê²½ì„ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•œë‹¤.

```bash
feedlyai-work/ (repo-app-sh)
â”œâ”€â”€ ðŸ“‚ lora_training/           # LoRA í›ˆë ¨ ì‹¤í—˜ì‹¤ (ë¡œì»¬ ê³µê°„)
â”‚   â”œâ”€â”€ ðŸ“‚ images/              # í•™ìŠµìš© ë°ì´í„°ì…‹ (ë–¡ë³¶ì´, ì¹˜í‚¨, ì‚¼ê²¹ì‚´...) - (Git ì œì™¸)
â”‚   â”œâ”€â”€ ðŸ“‚ captions/            # ìº¡ì…˜ í…ìŠ¤íŠ¸ íŒŒì¼ (.txt)
â”‚   â”œâ”€â”€ ðŸ“‚ output/              # í›ˆë ¨ëœ LoRA ê²°ê³¼ë¬¼ - (Git ì œì™¸)
â”‚   â”œâ”€â”€ train.sh                # í›ˆë ¨ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ (Accelerate + Diffusers)
â”‚   â”œâ”€â”€ metadata.csv            # ë°ì´í„°ì…‹ ê´€ë¦¬ ëŒ€ìž¥ (Excel/CSV)
â”‚   â””â”€â”€ generate_captions.py    # ìº¡ì…˜ íŒŒì¼ ìžë™ ìƒì„±ê¸°
â”‚
â”œâ”€â”€ ðŸ“‚ app/                     # ì„œë¹„ìŠ¤ ì½”ë“œ (FastAPI)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                 # FastAPI ë©”ì¸ ì•± ì—”ë“œí¬ì¸íŠ¸
â”‚   â”œâ”€â”€ services/               # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â””â”€â”€ image_enhancer.py   # Diffusers ì¶”ë¡  ë¡œì§ (Inference Pipeline)
â”‚   â””â”€â”€ utils/                  # ìœ í‹¸ë¦¬í‹°
â”‚
â”œâ”€â”€ ðŸ“‚ assets/                  # ì •ì  íŒŒì¼ & ëª¨ë¸ ì°½ê³ 
â”‚   â””â”€â”€ models/                 # í›ˆë ¨ëœ ìµœì¢… LoRA íŒŒì¼ (.safetensors) ë°°í¬ìš©
â”‚
â”œâ”€â”€ ðŸ“‚ tests/                   # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”œâ”€â”€ .env                        # í™˜ê²½ ë³€ìˆ˜ (DB ì ‘ì† ì •ë³´ ë“±) - (Git ì œì™¸)
â”œâ”€â”€ .gitignore                  # Git ë¬´ì‹œ ì„¤ì •
â””â”€â”€ requirements.txt            # íŒŒì´ì¬ ì˜ì¡´ì„± ëª©ë¡
```

-----

## ì‹œìž‘ ê°€ì´ë“œ (Quick Start)

### 1\. í™˜ê²½ ì„¤ì •

ì´ í”„ë¡œì íŠ¸ëŠ” `uv` íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¥¼ ì‚¬ìš©í•œë‹¤.

```bash
# ê°€ìƒí™˜ê²½ ìƒì„± (Python 3.11)
uv venv --python 3.11

# í™œì„±í™”
source .venv/bin/activate

# ì˜ì¡´ì„± ì„¤ì¹˜
uv pip install -r requirements.txt
```

### 2\. ì„œë¹„ìŠ¤ ì‹¤í–‰ (FastAPI)

ì„œë²„ë¥¼ ì‹¤í–‰í•˜ê³  API ë¬¸ì„œë¥¼ í™•ì¸í•œë‹¤.

```bash
# í¬íŠ¸: 8013 (sh ì „ìš©)
python app/main.py
```

  * **Docs:** `http://[Server_IP]:8013/docs`

-----

## LoRA íŒŒì¸íŠœë‹ ê°€ì´ë“œ (Fine-tuning)

### 1\. ë°ì´í„°ì…‹ ì¤€ë¹„ (`lora_training/`)

  * `images/` í´ë”ì— ê³ í™”ì§ˆ ìŒì‹ ì‚¬ì§„(20\~100ìž¥)ì„ ë„£ëŠ”ë‹¤.
  * `metadata.csv`ì— ìº¡ì…˜ ì •ë³´ë¥¼ ìž…ë ¥í•˜ê³  `generate_captions.py`ë¥¼ ì‹¤í–‰í•˜ì—¬ ìº¡ì…˜ì„ ìƒì„±í•œë‹¤.

### 2\. ìº¡ì…”ë‹ ê·œì¹™ (Golden Order)

AIê°€ ìŠ¤íƒ€ì¼ê³¼ í”¼ì‚¬ì²´ë¥¼ í˜¼ë™í•˜ì§€ ì•Šë„ë¡ ì•„ëž˜ ìˆœì„œë¥¼ ë°˜ë“œì‹œ ì§€í‚¨ë‹¤.

> **ê³µì‹:** `[1. íŠ¸ë¦¬ê±° ì›Œë“œ], [2. í”¼ì‚¬ì²´], [3. êµ¬ë„/ìƒ·], [4. ê°ê´€ì  ë¬˜ì‚¬], [5. ìŠ¤íƒ€ì¼]`

### 3\. í›ˆë ¨ ì‹¤í–‰

```bash
cd lora_training
bash train.sh
```

-----

## K-Food ìº¡ì…”ë‹ ë¼ì´ë¸ŒëŸ¬ë¦¬ (Vocabulary)

`metadata.csv` ìž‘ì„± ì‹œ, ì•„ëž˜ì˜ **í‘œì¤€ CLIP ë‹¨ì–´**ë“¤ì„ ì¡°í•©í•˜ì—¬ ì‚¬ìš©í•˜ë¼.

### 1\. ì¹´ë©”ë¼ ê°ë„ (Angle)

| í‘œí˜„ (English) | ì„¤ëª… | ì¶”ì²œ ëŒ€ìƒ |
| :--- | :--- | :--- |
| `aerial view`, `top-down shot` | **í•­ê³µìƒ· (ìˆ˜ì§)** | ë–¡ë³¶ì´, í”¼ìž, í•œìƒì°¨ë¦¼ |
| `45-degree angle shot` | **ì–¼ì§± ê°ë„** | êµ­ë°¥, íŒŒìŠ¤íƒ€, ë®ë°¥ (ê¹Šì´ê°) |
| `eye-level shot` | **ëˆˆë†’ì´ ì •ë©´** | í–„ë²„ê±°, ìƒŒë“œìœ„ì¹˜ ë‹¨ë©´, ìŒë£Œ |
| `close-up` | **í´ë¡œì¦ˆì—…** | ëŒ€ë¶€ë¶„ì˜ ë‹¨í’ˆ ë©”ë‰´ |
| `extreme close-up`, `macro shot` | **ì´ˆê·¼ì ‘ (ì§ˆê° ê°•ì¡°)** | ì†ŒìŠ¤, ê³ ê¸° ê²°, íŠ€ê¹€ì˜· ë””í…Œì¼ |

### 2\. ì¡°ëª… ë° ë°°ê²½ (Lighting & Background)

| í‘œí˜„ (English) | ì„¤ëª… | ë¹„ê³  |
| :--- | :--- | :--- |
| `cinematic lighting` | **ì˜í™” ê°™ì€ ì¡°ëª…** | ìž…ì²´ê°ê³¼ ë¶„ìœ„ê¸° ê°•ì¡° (ì¶”ì²œ) |
| `studio lighting` | **ìŠ¤íŠœë””ì˜¤ ì¡°ëª…** | ê¹”ë”í•˜ê³  ì„ ëª…í•¨ |
| `natural lighting` | ìžì—°ê´‘ | ì°½ê°€ ëŠë‚Œ |
| `bokeh`, `shallow depth of field` | **ë°°ê²½ íë¦¼** | ìŒì‹ ì§‘ì¤‘ë„ í–¥ìƒ (ì¶”ì²œ) |
| `plain background`, `black background` | **ë‹¨ìƒ‰/ê²€ì€ ë°°ê²½** | **ì£¼ì˜:** ëˆ„ë¼ì»·ì¼ ê²½ìš° í•„ìˆ˜ ê¸°ìž¬ (ì˜¤ì—¼ ë°©ì§€) |
| `neutral lighting`, `flat lighting` | ë°‹ë°‹í•œ/í˜•ê´‘ë“± ì¡°ëª… | **ì£¼ì˜:** í›ˆë ¨ ë°ì´í„°ê°€ í‰ë²”í•  ë•Œ ê¼­ ê¸°ìž¬ |

### 3\. K-Food ì§ˆê° ë¬˜ì‚¬ (Texture)

| ì¹´í…Œê³ ë¦¬ | í‘œí˜„ (English) | ì ìš© ë©”ë‰´ |
| :--- | :--- | :--- |
| **Type 1. Glossy** | `glossy`, `viscous`, `shiny sauce`, `thick sauce` | ë–¡ë³¶ì´, ì–‘ë…ì¹˜í‚¨, ì°œë‹­ (ì†ŒìŠ¤ ì½”íŒ…) |
| **Type 2. Juicy** | `juicy`, `oily`, `greasy`, `wet surface` | ì‚¼ê²¹ì‚´, ë³´ìŒˆ, ìŠ¤í…Œì´í¬ (ê¸°ë¦„ê¸°) |
| **Type 3. Crispy** | `crispy`, `crunchy`, `golden brown`, `deep fried` | í›„ë¼ì´ë“œ ì¹˜í‚¨, ëˆê¹ŒìŠ¤, íŠ€ê¹€ |
| **Type 4. Fresh** | `fresh`, `fibrous`, `translucent`, `vibrant` | ìŒˆ ì±„ì†Œ, íšŒ, ìœ¡íšŒ |
| **Type 5. Steaming** | `steaming`, `hot`, `steam rising` | ì°Œê°œ, êµ­ë°¥, ê°“ ë‚˜ì˜¨ ìš”ë¦¬ |

### 4\. í€„ë¦¬í‹° íƒœê·¸ (Quality - í•„ìˆ˜\!)

*ëª¨ë“  ìº¡ì…˜ì˜ ë§ˆì§€ë§‰ì— í¬í•¨í•˜ì—¬ ê³ í€„ë¦¬í‹°ë¥¼ 'ê¸°ë³¸ê°’'ìœ¼ë¡œ í•™ìŠµì‹œí‚¨ë‹¤.*

> `masterpiece, best quality, ultra realistic, food photography, 8k resolution`

